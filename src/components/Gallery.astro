---
import { Image } from 'astro:assets';
import image1 from '../assets/image-1.jpg';
import image2 from '../assets/image-2.jpg';
import image3 from '../assets/image-3.jpg';
import image4 from '../assets/image-4.jpg';
import image5 from '../assets/image-5.jpg';

const galleryImages = [image1, image2, image3, image4, image5];
---

<section class="w-full bg-black py-20">
    <div class="max-w-[1920px] mx-auto px-4 sm:px-8">
        <h2 class="text-4xl md:text-5xl font-serif text-white text-center mb-16">Gallery</h2>
        
        <div class="gallery-container overflow-hidden relative">
            <div class="gallery-track flex gap-6 cursor-pointer whitespace-nowrap">
                {galleryImages.map((image, index) => (
                    <div class="gallery-item min-w-[260px] md:min-w-[400px] aspect-square rounded-lg overflow-hidden hover:scale-105 transition-transform duration-300 inline-block">
                        <Image 
                            src={image} 
                            alt={`Gallery image ${index + 1}`}
                            width={400}
                            height={400}
                            loading={index < 3 ? "eager" : "lazy"}
                            format="webp"
                            quality={75}
                            class="w-full h-full object-cover"
                        />
                    </div>
                ))}
            </div>
        </div>
    </div>
</section>

<style>
    .gallery-track {
        animation: scroll 20s linear infinite;
        will-change: transform;
    }

    .gallery-track:hover {
        animation-play-state: paused;
    }

    @keyframes scroll {
        0% { transform: translateX(0); }
        100% { transform: translateX(calc(-260px * 5 - 1.5rem * 5)); }
    }

    @media (min-width: 768px) {
        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(calc(-400px * 5 - 1.5rem * 5)); }
        }
    }
</style>

<script>
    // Defer cloning until after initial page load
    window.addEventListener('load', () => {
        const track = document.querySelector('.gallery-track');
        if (track) {
            const clone = track.innerHTML;
            track.innerHTML = clone + clone;
        }
    });
</script> 